<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>다양한 이미지 마커 표시하기</title>
    <style>
        #mapwrap {
            position: relative;
            overflow: hidden;
        }

        .category,
        .category * {
            margin: 0;
            padding: 0;
            color: #000;
        }

        .category {
            position: absolute;
            overflow: hidden;
            top: 10px;
            left: 10px;
            width: 150px;
            height: 50px;
            z-index: 10;
            border: 1px solid black;
            font-family: 'Malgun Gothic', '맑은 고딕', sans-serif;
            font-size: 12px;
            text-align: center;
            background-color: #fff;
        }

        .category .menu_selected {
            background: #FF5F4A;
            color: #fff;
            border-left: 1px solid #915B2F;
            border-right: 1px solid #915B2F;
            margin: 0 -1px;
        }

        .category li {
            list-style: none;
            float: left;
            width: 50px;
            height: 45px;
            padding-top: 5px;
            cursor: pointer;
        }

        .category .ico_comm {
            display: block;
            margin: 0 auto 2px;
            width: 22px;
            height: 26px;
            background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/category.png') no-repeat;
        }

        .category .ico_coffee {
            background-position: -10px 0;
        }

        .category .ico_store {
            background-position: -10px -36px;
        }

        .category .ico_carpark {
            background-position: -10px -72px;
        }
    </style>
</head>

<body>
    <div id="mapwrap">
        <!-- 지도가 표시될 div -->
        <div id="map" style="width:100%;height:350px;"></div>
        <!-- 지도 위에 표시될 마커 카테고리 -->
        <div class="category">
            <ul>
                <li id="coffeeMenu" onclick="changeMarker('coffee')">
                    <span class="ico_comm ico_coffee"></span>
                    커피숍
                </li>
                <li id="storeMenu" onclick="changeMarker('store')">
                    <span class="ico_comm ico_store"></span>
                    편의점
                </li>
                <li id="carparkMenu" onclick="changeMarker('carpark')">
                    <span class="ico_comm ico_carpark"></span>
                    주차장
                </li>
            </ul>
        </div>
    </div>
    <script src="../js/jquery-3.6.0.js"></script>
    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a9f11824227fa73885a5a969e86a34db"></script>
    <script>
        var mapContainer = document.getElementById('map'), // 지도를 표시할 div  
            mapOption = {
                center: new kakao.maps.LatLng(37.498004414546934, 127.02770621963765), // 지도의 중심좌표 
                level: 3 // 지도의 확대 레벨 
            };

        var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

        $.ajax({
            url: 'final_PublicFacility (2).json',
            type: 'GET',
            dataType: 'json',
            error: function () {
                alert('error!')
            },
            success: function (json) {
                const ArrayofEverything = json.publicfacility;
                var golfPositions = [];
                var basketPositions = [];
                var multiUsePositions = [];
                var badminPositions = [];
                var baseballPositions = [];
                var footballPositions = [];
                var gymPositions = [];
                var soccerPositions = [];
                var campingPositions = [];
                var tennisPositions = [];
                var footsalPositions = [];

                for (const data of ArrayofEverything) {
                    name = data.Location_nm;
                    lat = data.Lat;
                    lng = data.Lng;
                    type = data.Facility_Type;

                    switch (type) {
                        case '골프장': golfPositions.push(new kakao.maps.LatLng(lat, lng));
                            break;
                        case '농구장': basketPositions.push(new kakao.maps.LatLng(lat, lng));
                            break;
                        case '다목적경기장': multiUsePositions.push(new kakao.maps.LatLng(lat, lng));
                            break;
                        case '배드맨턴장': badminPositions.push(new kakao.maps.LatLng(lat, lng));
                            break;
                        case '야구장': baseballPositions.push(new kakao.maps.LatLng(lat, lng));
                            break;
                        case '족구장': footballPositions.push(new kakao.maps.LatLng(lat, lng));
                            break;
                        case '체육관': gymPositions.push(new kakao.maps.LatLng(lat, lng));
                            break;
                        case '축구장': soccerPositions.push(new kakao.maps.LatLng(lat, lng));
                            break;
                        case '캠핑장': campingPositions.push(new kakao.maps.LatLng(lat, lng));
                            break;
                        case '테니스장': tennisPositions.push(new kakao.maps.LatLng(lat, lng));
                            break;
                        case '풋살경기장': footsalPositions.push(new kakao.maps.LatLng(lat, lng));
                            break;


                    }
                }   



                creategolfMarkers();
                createbasketMarkers();
                createmultiUseMarkers();
                createbadminMarkers();
                createbaseballMarkers();
                createfootballMarkers();
                creategymMarkers();
                createsoccerMarkers();
                createcampingMarkers();
                createtennisMarkers();
                createfootsalMarkers();

                changeMarker('all'); // 지도에 커피숍 마커가 보이도록 설정합니다    

                /*
                        // 마커이미지의 주소와, 크기, 옵션으로 마커 이미지를 생성하여 리턴하는 함수입니다
                        function createMarkerImage(src, size, options) {
                            var markerImage = new kakao.maps.MarkerImage(src, size, options);
                            return markerImage;
                        }
                        */

                // 좌표와 마커이미지를 받아 마커를 생성하여 리턴하는 함수입니다
                function createMarker(position, image) {
                    var marker = new kakao.maps.Marker({
                        position: position,
                        image: image
                    });

                    return marker;
                }
                // 커피숍 마커를 생성하고 커피숍 마커 배열에 추가하는 함수입니다
                function creategolfMarkers() {
                    var golfMarkers = [];
                    for (var i = 0; i < golfPositions.length; i++) {
                        var imageSrc = 'mark/골프장.png',
                            imageSize = new kakao.maps.Size(22, 26),
                            imageOption = { offset: new kakao.maps.Point(27, 69) };

                        // 마커이미지와 마커를 생성합니다
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
                            marker = createMarker(golfPositions[i], markerImage);
                        // 생성된 마커를 커피숍 마커 배열에 추가합니다
                        golfMarkers.push(marker);
                        golfMarkers[i].setMap(map);
                    }
                }
                /*
                        // 커피숍 마커들의 지도 표시 여부를 설정하는 함수입니다
                        function setCoffeeMarkers(map) {
                            for (var i = 0; i < coffeeMarkers.length; i++) {
                                coffeeMarkers[i].setMap(map);
                            }
                        }
                */

                function createbasketMarkers() {
                    basketMarkers = [];
                    for (var i = 0; i < basketPositions.length; i++) {
                        var imageSrc = 'mark/농구장.png',
                            imageSize = new kakao.maps.Size(22, 26),
                            imageOption = { offset: new kakao.maps.Point(27, 69) };
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
                            marker = createMarker(basketPositions[i], markerImage);
                        basketMarkers.push(marker);
                        basketMarkers[i].setMap(map);
                    }
                }

                function createmultiUseMarkers() {
                multiUseMarkers = [];
                    for (var i = 0; i < multiUsePositions.length; i++) {
                        var imageSrc = 'mark/다목적경기장.png',
                            imageSize = new kakao.maps.Size(22, 26),
                            imageOption = { offset: new kakao.maps.Point(27, 69) };
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
                            marker = createMarker(multiUsePositions[i], markerImage);
                        multiUseMarkers.push(marker);
                        multiUseMarkers[i].setMap(map);
                    }
                }

                function createbadminMarkers() {
                badminMarkers = [];
                    for (var i = 0; i < badminPositions.length; i++) {
                        var imageSrc = 'mark/다목적경기장.png',
                            imageSize = new kakao.maps.Size(22, 26),
                            imageOption = { offset: new kakao.maps.Point(27, 69) };
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
                            marker = createMarker(badminPositions[i], markerImage);
                        badminMarkers.push(marker);
                        badminMarkers[i].setMap(map);
                    }
                }

                function createbaseballMarkers() {

baseballMarkers = [];
                    for (var i = 0; i < baseballPositions.length; i++) {
                        var imageSrc = 'mark/다목적경기장.png',
                            imageSize = new kakao.maps.Size(22, 26),
                            imageOption = { offset: new kakao.maps.Point(27, 69) };
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
                            marker = createMarker(baseballPositions[i], markerImage);
                        baseballMarkers.push(marker);
                        baseballMarkers[i].setMap(map);
                    }
                }

                function createfootballMarkers() {

footballMarkers = [];

                    for (var i = 0; i < footballPositions.length; i++) {
                        var imageSrc = 'mark/다목적경기장.png',
                            imageSize = new kakao.maps.Size(22, 26),
                            imageOption = { offset: new kakao.maps.Point(27, 69) };
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
                            marker = createMarker(footballPositions[i], markerImage);
                        footballMarkers.push(marker);
                        footballMarkers[i].setMap(map);
                    }
                }

                function creategymMarkers() {
                    gymMarkers = [];

                    for (var i = 0; i < gymPositions.length; i++) {
                        var imageSrc = 'mark/다목적경기장.png',
                            imageSize = new kakao.maps.Size(22, 26),
                            imageOption = { offset: new kakao.maps.Point(27, 69) };
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
                            marker = createMarker(gymPositions[i], markerImage);
                        gymMarkers.push(marker);
                        gymMarkers[i].setMap(map);
                    }
                }

                function createsoccerMarkers() {
                    soccerMarkers = [];

                    for (var i = 0; i < soccerPositions.length; i++) {
                        var imageSrc = 'mark/다목적경기장.png',
                            imageSize = new kakao.maps.Size(22, 26),
                            imageOption = { offset: new kakao.maps.Point(27, 69) };
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
                            marker = createMarker(soccerPositions[i], markerImage);
                        soccerMarkers.push(marker);
                        soccerMarkers[i].setMap(map);
                    }
                }

                function createcampingMarkers() {
                    campingMarkers = [];

                    for (var i = 0; i < campingPositions.length; i++) {
                        var imageSrc = 'mark/다목적경기장.png',
                            imageSize = new kakao.maps.Size(22, 26),
                            imageOption = { offset: new kakao.maps.Point(27, 69) };
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
                            marker = createMarker(campingPositions[i], markerImage);
                        campingMarkers.push(marker);
                        campingMarkers[i].setMap(map);
                    }
                }


                function createtennisMarkers() {
                    tennisMarkers = [];

                    for (var i = 0; i < tennisPositions.length; i++) {
                        var imageSrc = 'mark/다목적경기장.png',
                            imageSize = new kakao.maps.Size(22, 26),
                            imageOption = { offset: new kakao.maps.Point(27, 69) };
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
                            marker = createMarker(tennisPositions[i], markerImage);
                        tennisMarkers.push(marker);
                        tennisMarkers[i].setMap(map);
                    }
                }

                function createfootsalMarkers() {
                    footsalMarkers = [];
                    for (var i = 0; i < footsalPositions.length; i++) {
                        var imageSrc = 'mark/다목적경기장.png',
                            imageSize = new kakao.maps.Size(22, 26),
                            imageOption = { offset: new kakao.maps.Point(27, 69) };
                        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
                            marker = createMarker(footsalPositions[i], markerImage);
                        footsalMarkers.push(marker);
                        footsalMarkers[i].setMap(map);
                    }
                }







































                // 카테고리를 클릭했을 때 type에 따라 카테고리의 스타일과 지도에 표시되는 마커를 변경합니다
                function changeMarker(type) {
                    /*
                                var golfMenu = document.getElementById('golfMenu');
                                var basketMenu = document.getElementById('basketMenu');
                                var multiUseMenu = document.getElementById('multiUseMenu');
                    */
                    // 커피숍 카테고리가 클릭됐을 때
                    if (type === 'golf') {

                        // 커피숍 카테고리를 선택된 스타일로 변경하고
                        golfMenu.className = 'menu_selected';

                        // 편의점과 주차장 카테고리는 선택되지 않은 스타일로 바꿉니다
                        basketMenu.className = '';
                        multiUseMenu.className = '';

                        // 커피숍 마커들만 지도에 표시하도록 설정합니다
                        setgolfMarkers(map);
                        setbasketMarkers(null);
                        setmultiUseMarkers(null);

                    } else if (type === 'basket') { // 편의점 카테고리가 클릭됐을 때

                        // 편의점 카테고리를 선택된 스타일로 변경하고
                        golfMenu.className = '';
                        basketMenu.className = 'menu_selected';
                        multiUseMenu.className = '';

                        // 편의점 마커들만 지도에 표시하도록 설정합니다
                        setgolfMarkers(null);
                        setbasketMarkers(map);
                        setmultiUseMarkers(null);

                    } else if (type === 'multiUse') { // 주차장 카테고리가 클릭됐을 때

                        // 주차장 카테고리를 선택된 스타일로 변경하고
                        golfMenu.className = '';
                        basketMenu.className = '';
                        multiUseMenu.className = 'menu_selected';

                        // 주차장 마커들만 지도에 표시하도록 설정합니다
                        setgolfMarkers(null);
                        setbasketMarkers(null);
                        setmultiUseMarkers(map);
                    }

                    else if (type === 'multiUse') { // 주차장 카테고리가 클릭됐을 때

                        // 주차장 카테고리를 선택된 스타일로 변경하고
                        golfMenu.className = '';
                        basketMenu.className = '';
                        multiUseMenu.className = 'menu_selected';

                        // 주차장 마커들만 지도에 표시하도록 설정합니다
                        setgolfMarkers(null);
                        setbasketMarkers(null);
                        setmultiUseMarkers(map);
                    } else if (type === 'multiUse') { // 주차장 카테고리가 클릭됐을 때

                        // 주차장 카테고리를 선택된 스타일로 변경하고
                        golfMenu.className = '';
                        basketMenu.className = '';
                        multiUseMenu.className = 'menu_selected';

                        // 주차장 마커들만 지도에 표시하도록 설정합니다
                        setgolfMarkers(null);
                        setbasketMarkers(null);
                        setmultiUseMarkers(map);
                    } else if (type === 'multiUse') { // 주차장 카테고리가 클릭됐을 때

                        // 주차장 카테고리를 선택된 스타일로 변경하고
                        golfMenu.className = '';
                        basketMenu.className = '';
                        multiUseMenu.className = 'menu_selected';

                        // 주차장 마커들만 지도에 표시하도록 설정합니다
                        setgolfMarkers(null);
                        setbasketMarkers(null);
                        setmultiUseMarkers(map);
                    } else if (type === 'multiUse') { // 주차장 카테고리가 클릭됐을 때

                        // 주차장 카테고리를 선택된 스타일로 변경하고
                        golfMenu.className = '';
                        basketMenu.className = '';
                        multiUseMenu.className = 'menu_selected';

                        // 주차장 마커들만 지도에 표시하도록 설정합니다
                        setgolfMarkers(null);
                        setbasketMarkers(null);
                        setmultiUseMarkers(map);
                    } else if (type === 'multiUse') { // 주차장 카테고리가 클릭됐을 때

                        // 주차장 카테고리를 선택된 스타일로 변경하고
                        golfMenu.className = '';
                        basketMenu.className = '';
                        multiUseMenu.className = 'menu_selected';

                        // 주차장 마커들만 지도에 표시하도록 설정합니다
                        setgolfMarkers(null);
                        setbasketMarkers(null);
                        setmultiUseMarkers(map);
                    } else if (type === 'multiUse') { // 주차장 카테고리가 클릭됐을 때

                        // 주차장 카테고리를 선택된 스타일로 변경하고
                        golfMenu.className = '';
                        basketMenu.className = '';
                        multiUseMenu.className = 'menu_selected';

                        // 주차장 마커들만 지도에 표시하도록 설정합니다
                        setgolfMarkers(null);
                        setbasketMarkers(null);
                        setmultiUseMarkers(map);
                    } else if (type === 'multiUse') { // 주차장 카테고리가 클릭됐을 때

                        // 주차장 카테고리를 선택된 스타일로 변경하고
                        golfMenu.className = '';
                        basketMenu.className = '';
                        multiUseMenu.className = 'menu_selected';

                        // 주차장 마커들만 지도에 표시하도록 설정합니다
                        setgolfMarkers(null);
                        setbasketMarkers(null);
                        setmultiUseMarkers(map);
                    } else if (type === 'multiUse') { // 주차장 카테고리가 클릭됐을 때

                        // 주차장 카테고리를 선택된 스타일로 변경하고
                        golfMenu.className = '';
                        basketMenu.className = '';
                        multiUseMenu.className = 'menu_selected';

                        // 주차장 마커들만 지도에 표시하도록 설정합니다
                        setgolfMarkers(null);
                        setbasketMarkers(null);
                        setmultiUseMarkers(map);
                    }
                }
            }
        })

    </script>
</body>

</html>